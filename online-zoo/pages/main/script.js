const animalData = [
  {
    "id":"0",
    "name": "Giant Pandas",
    "subtext":"Native to Southwest China",
    "mainImg": "/online-zoo/assets/images/Rectangle_5.png",
    "foodImg":"/online-zoo/assets/icons/banana-bamboo_icon.svg",

  }
  ,
  {
    "id":"1",
    "name": "Eagles",
    "subtext":"Native to South America",
    "mainImg": "/online-zoo/assets/images/eagles_1.png",
    "foodImg":"/online-zoo/assets/icons/meet-fish_icon.svg",
  }
  ,
  {
    "id":"2",
    "name": "Gorillas",
    "subtext":"Native to Congo",
    "mainImg": "/online-zoo/assets/images/gorillas_1.png",
    "foodImg":"/online-zoo/assets/icons/banana-bamboo_icon.svg",
  }
  ,
  {
    "id":"3",
    "name": "Two-toed Sloth",
    "subtext":"Mesoamerica, South America",
    "mainImg": "/online-zoo/assets/images/sloth_1.png",
    "foodImg":"/online-zoo/assets/icons/banana-bamboo_icon.svg",
  }
  ,
  {
    "id":"4",
    "name": "Cheetahs",
    "subtext":"Native to Africa",
    "mainImg": "/online-zoo/assets/images/cheetah_1.png",
    "foodImg":"/online-zoo/assets/icons/meet-fish_icon.svg",
  }
  ,
  {
    "id":"5",
    "name": "Penguins",
    "subtext":"Native to Antarctica",
    "mainImg": "/online-zoo/assets/images/penguin_1.png",
    "foodImg":"/online-zoo/assets/icons/meet-fish_icon.svg",
  }
]

const testimonalData = [
  {
    "id": "0",
    "img":"/online-zoo/assets/icons/user_icon.svg",
    "name":"Michael John",
    "location":"Local Austria",
    "time":"Today",
    "review":"The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals. The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals. The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.<br> The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals."


  }
  ,
  {
    "id": "1",
    "img":"/online-zoo/assets/images/photo_2.png",
    "name":"Oskar Samborsky",
    "location":"Local Austria",
    "time":"Yesterday",
    "review":"Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas.<br> The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals."
  }
  ,
  {
    "id": "2",
    "img":"/online-zoo/assets/images/photo_3.png",
    "name":"Fredericka Michelin",
    "location":"Local Austria",
    "time":"Yesterday",
    "review":"The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.<br> The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals."
  }
  ,
  {
    "id": "3",
    "img":"/online-zoo/assets/images/photo_4.png",
    "name":"Mila Riksha",
    "location":"Local Austria",
    "time":"Today",
    "review":"My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas.<br> The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals."
  }
  ,
  {
    "id": "4",
    "img":"/online-zoo/assets/icons/user_icon.svg",
    "name":"John Doe",
    "location":"Local Germany",
    "time":"Yesterday",
    "review":"The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals. The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.<br>The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals."
  }
  ,
  {
    "id": "5",
    "img":"/online-zoo/assets/icons/user_icon.svg",
    "name":"Roman Bolski",
    "location":"Local Poland",
    "time":"Today",
    "review":"The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals. The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.<br>The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals."
  }
  ,
  {
    "id": "6",
    "img":"/online-zoo/assets/icons/user_icon.svg",
    "name":"Peter Parker",
    "location":"Local New-York",
    "time":"Yesterday",
    "review":"The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals. The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.<br>The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals."
  }
  ,
  {
    "id": "7",
    "img":"/online-zoo/assets/icons/user_icon.svg",
    "name":"Aleksandr Tsar",
    "location":"Local Germany",
    "time":"Today",
    "review":"The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals. The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.<br>The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals."
  }
  ,
  {
    "id": "8",
    "img":"/online-zoo/assets/icons/user_icon.svg",
    "name":"Ivan Ivanov",
    "location":"Local Russia",
    "time":"Yesterday",
    "review":"The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals. The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.<br>The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals."
  }
  ,
  {
    "id": "9",
    "img":"/online-zoo/assets/icons/user_icon.svg",
    "name":"Dmitri Rashkevich",
    "location":"Local Belarus",
    "time":"Yesterday",
    "review":"The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals. The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.<br>The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals."
  }
  ,
  {
    "id": "10",
    "img":"/online-zoo/assets/icons/user_icon.svg",
    "name":"Roland Ballson",
    "location":"Local Britain",
    "time":"Yesterday",
    "review":"The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals. The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.<br>The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals.The best online zoo I’ve met. My son delighted very much ljves to watch gouillas. Online zoo is one jf the ways to instill a love for animals."
  }
]


/* Бургир Меню */

const borgar = document.querySelector('.borgar');
const navList = document.querySelector('.navigation-list')
const logo = document.querySelector('h1')
const body = document.querySelector('body')
const navContainer = document.querySelector('.nav-container')
const designBy = document.querySelector('.design-by-text')
const line = document.querySelectorAll('.line')



function toggleMenu() {
    if(borgar.classList.contains('show') && navContainer.classList.contains('background-smoke') && borgar.classList.contains('rotate') && borgar.classList.contains('position') && navList.classList.contains('active') && logo.classList.contains('hide')){
      borgar.classList.remove('show');
    borgar.classList.remove('position');
    navList.classList.remove('active');
    logo.classList.remove('hide');
    borgar.classList.remove('rotate');
    navContainer.classList.remove('background-smoke')
    designBy.classList.remove('active')
    for (let i= 0; i<line.length; i++){
        line[i].classList.remove('color')
    }
  
 
  
    } else {
      borgar.classList.add('show');
      borgar.classList.add('position');
      navList.classList.add('active');
      logo.classList.add('hide');
      borgar.classList.add('rotate');
      navContainer.classList.add('background-smoke')
      designBy.classList.add('active')
      for (let i= 0; i<line.length; i++){
        line[i].classList.add('color')
    }
    }
  
  }
  
  navContainer.addEventListener('click', toggleMenu);
  
  borgar.addEventListener('click', toggleMenu);

  /*Каруселя */

const btnLeft = document.getElementById('btn-left')
const btnRight = document.getElementById('btn-right')
const btnLeft_2 = document.getElementById('btn-left-2')
const btnRight_2 = document.getElementById('btn-right-2')
const blockCards = document.querySelector('.animal-cards')
const cardBlock = document.querySelector('.animal-card')
const left_Item = document.querySelector('#left-items')
const right_Item = document.querySelector('#right-items')
const active_Item = document.querySelector('#active-items');


function moveLeft(){
  blockCards.classList.add('trans-left');
  btnLeft.removeEventListener('click', moveLeft)
  btnRight.removeEventListener('click', moveRight)
}

function moveRight(){
  blockCards.classList.add('trans-right');
  btnLeft.removeEventListener('click', moveLeft)
  btnRight.removeEventListener('click', moveRight)
}

btnLeft.addEventListener('click', moveLeft)
btnRight.addEventListener('click', moveRight)


blockCards.addEventListener('animationend', (animationEvent)=> {
  let changedItemRight, changedItemLeft
if (animationEvent.animationName === 'move-left'){
  blockCards.classList.remove('trans-left')
 changedItemLeft = left_Item;
 changedItemRight = right_Item;
  document.querySelector('#active-items').innerHTML = left_Item.innerHTML;

} if (animationEvent.animationName === 'move-right') {
  blockCards.classList.remove('trans-right')
  changedItemRight = right_Item;
  changedItemLeft = left_Item;
  document.querySelector('#active-items').innerHTML = right_Item.innerHTML;
}

changedItemLeft.innerHTML ='';
changedItemRight.innerHTML = '';



const parent = active_Item;
const children = Array.from(parent.children);
//console.log(children)
let activeIds = children.map(element => {
  return Number(element.id)
})
console.log(activeIds)

let frsRandomArray = getInclusiveRandow(activeIds);
for (let k = 0; k<frsRandomArray.length; k++){
let card = createCardTemplate(frsRandomArray[k]);
changedItemLeft.appendChild(card)
}
let scnRandomArray = getInclusiveRandow(activeIds);
for (let k = 0; k<scnRandomArray.length; k++){
let card = createCardTemplate(scnRandomArray[k]);
changedItemRight.appendChild(card)
}





  btnLeft.addEventListener('click', moveLeft)
  btnRight.addEventListener('click', moveRight)



})


/*Обновление порядка блоков при перезагрузке странциы*/

function updateActiveBlock(){
  
  if (window.innerWidth <= 999) {
    active_Item.innerHTML = "";
    let newArr = new Set();
    while(newArr.size < 4) {
      let random = Math.floor(Math.random() * (5 - 0 + 1)) + 0;
      newArr.add(random)
    }
    console.log(Array.from(newArr))
    let transformedArr = Array.from(newArr)
    

    let frsRandomArray = getInclusiveRandow(transformedArr);
    for (let k = 0; k<frsRandomArray.length; k++){
    let card = createCardTemplate(frsRandomArray[k]);
    active_Item.appendChild(card)
    }
  }
}



updateActiveBlock()


function updateOrderOfBlocks(){

  const parent = active_Item;
  
  const children = Array.from(parent.children);
  right_Item.innerHTML = ""
  left_Item.innerHTML = ""
  //console.log(children)
  let activeIds = children.map(element => {
    return Number(element.id)
  })
  console.log(activeIds)
  
  let frsRandomArray = getInclusiveRandow(activeIds);
  for (let k = 0; k<frsRandomArray.length; k++){
  let card = createCardTemplate(frsRandomArray[k]);
  left_Item.appendChild(card)
  }
  let scnRandomArray = getInclusiveRandow(activeIds);
  for (let k = 0; k<scnRandomArray.length; k++){
  let card = createCardTemplate(scnRandomArray[k]);
  right_Item.appendChild(card)
  }
}

updateOrderOfBlocks()





/* Фунцкция получения уникального массива*/
function getInclusiveRandow(actArr){
  let newArr = new Set()


  for (let i = 0; i<actArr.length; i++){
    if (actArr.length === 11){
      while(newArr.size < 11) {
        let random = Math.floor(Math.random() * (10 - 0 + 1)) + 0;
        newArr.add(random)
      }
    }
    if (actArr.length === 4){
      while(newArr.size < 4) {
        let random = Math.floor(Math.random() * (5 - 0 + 1)) + 0;
        newArr.add(random)
      }
    } else {
      while(newArr.size < 6) {
        let random = Math.floor(Math.random() * (5 - 0 + 1)) + 0;
          newArr.add(random)
      }
    }
  
  
  }



return Array.from(newArr)
}

/*Создание макета карточки с животным*/

function createCardTemplate(num){
  card = document.createElement('div');
  card.classList.add('animal-card');
  card.setAttribute('id', `${animalData[num].id}`)
  card.innerHTML = `<img class ="animal-pic" src = ${animalData[num].mainImg} alt ='eagles'> <div class = "float-text"><div class ="text-mask"><h4 class ='animal-card-title'>${animalData[num].name}</h4>
  <p class ='animal-text'>${animalData[num].subtext}</p></div><img class = "food-icon" src = ${animalData[num].foodImg} alt ="Bambo-banana-pic"></div>`;
  
  return card
  
  
}

console.log(window.innerWidth)
//const activeIds = [0,1,2,3,4,5] 
//console.log(getInclusiveRandow(activeIds))
//console.log(createCardTemplate(3))


// Формирование попапа 

function createPopupElement(num){
  const title = document.querySelector(".modal-card-title")
  const photoIcon = document.querySelector('.modal-card-pic')
  const subText = document.querySelector(".modal-subtext-text")

  photoIcon.src = testimonalData[num].img
  title.innerHTML = `<h4>${testimonalData[num].name}</h4> <div class ="subtext-header-block">
  <p class = "modal-subtext-location">${testimonalData[num].location}</p><p class = "subtext-dot">•</p><p class = "modal-subtext-time">${testimonalData[num].time}</p> 
</div>`

  subText.textContent = testimonalData[num].review
}

/* Обновление Попапа*/

function updatePopup(id){
  convert = Number(id);
  let result = createPopupElement(id);
  return result;
}





const listCards = document.querySelector('.list-of-testimonials-cards')
const modalWrapper = document.querySelector('.modal-wrapper');
const modalWrapperBckgr = document.querySelector('.modal-wrapper-background');
const  cardTemplate= document.querySelectorAll('.list-of-testimonials-card')
const modalCloseBtn = document.querySelector('.close-btn-modal')
const listWrap = document.querySelector('.list-wrap')


/*Создание макета карточки отзыва*/

function createTestimonialsCard(num){
  let testCard = document.createElement('div')
  testCard.classList.add('list-wrap');
  testCard.setAttribute('onClick', "updatePopup(this.id)");
  testCard.setAttribute('id', `${testimonalData[num].id}`);
  testCard.innerHTML = `<div class ='list-of-testimonials-card'>
  <div class = "card-header">
  <img class = "card-pic" src = ${testimonalData[num].img} alt ="user-icon">
  <div class = "card-title"> 
  <h4>${testimonalData[num].name}</h4>
  
  <div class ="subtext-header-block ">
      <p class = "subtext-location">${testimonalData[num].location}</p><p class = "subtext-dot">•</p><p class = "subtext-time">${testimonalData[num].time}</p> 
  </div>
  </div>
</div> 
  <p class = "subtext-text">${testimonalData[num].review}</p>
</div>`
return testCard
}


function createRandomOrderOfTestimonials(){
  listCards.innerHTML = "";
  let newArr = new Set();
  while(newArr.size < 11) {
    let random = Math.floor(Math.random() * (10 - 0 + 1)) + 0;
    newArr.add(random)
  }
  console.log(Array.from(newArr))
  let transformedArr = Array.from(newArr)
  

  let frsRandomArray = getInclusiveRandow(transformedArr);
  for (let k = 0; k<frsRandomArray.length; k++){
  let card = createTestimonialsCard(frsRandomArray[k]);
  listCards.appendChild(card)
  }

}

createRandomOrderOfTestimonials();

function togglePopap(){
  
  if(modalWrapperBckgr.classList.contains('show') && modalWrapper.classList.contains('show') && listWrap.classList.contains('show')){
    modalWrapperBckgr.classList.remove('show');
    modalWrapper.classList.remove('show');
    listWrap.classList.remove('show')
    document.removeEventListener('wheel', prevent);

  } else {
    modalWrapperBckgr.classList.add('show');
    modalWrapper.classList.add('show');
    listWrap.classList.add('show')
    document.addEventListener('wheel', prevent, {passive: false})
  }
}




function prevent(ev) {
  ev.preventDefault();
}

const cardDefault = document.querySelector(".list-of-testimonials-card")


/*Карусель из отзывов */

const scrobler = document.querySelector(".input-scrobler")
const revCard = document.querySelector(".list-wrap")
const revCards = document.querySelectorAll(".list-wrap");
const modalRevCard = document.querySelector(".modal-list-wrap")

function testimonialsSlider(){
  let scrollVal = scrobler.value
  
  listCards.style.transition = "1s ease transform"
  listCards.style.transform = `translateX(${-scrollVal * 297}px)`
  if(window.matchMedia('(max-width: 1599px)').matches){
    listCards.style.transition = "1s ease transform"
    listCards.style.transform = `translateX(${-scrollVal * 325}px)`
  }
}

scrobler.addEventListener("input", testimonialsSlider)

const media = window.matchMedia('(max-width: 639px)');
function upPopup(){
  if ( window.matchMedia('(max-width: 999px)').matches){
    modalRevCard.addEventListener('click', togglePopap)
  
    for (let i= 0; i<revCards.length; i++){
      revCards[i].addEventListener('click', togglePopap)
      
    }
    modalWrapper.addEventListener('click', togglePopap)
  }
}

upPopup()
console.log(media)




